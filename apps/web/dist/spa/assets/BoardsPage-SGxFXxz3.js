import{S as k,I as V,r as h,o as S,J as C,K as a,T as q,R as l,U as s,L as t,V as B,W as c,Q as p,X as m,N,Y as v,Z as T,_ as D,$ as F,O as L,B as P}from"./index-Bve56w8L.js";import{a as w,e as x,Q as $,u as K,b as U,c as A,d as g,f as b,g as I,h as M,C as O}from"./errors-g7rgJ-Bd.js";import{Q as R}from"./user-o0XP6R18.js";const E=k("boards",{state:()=>({boards:[],loading:!1,error:null}),actions:{async fetchBoards(){this.loading=!0,this.error=null;try{const d=await w("/boards");this.boards=d}catch(d){this.error=x(d,"Failed to load boards")}finally{this.loading=!1}},async createBoard(d){this.error=null;try{const n=await w("/boards",{method:"POST",body:{title:d}});return this.boards=[n.board,...this.boards],n.board}catch(n){return this.error=x(n,"Failed to create board"),null}}}}),J={class:"row items-center q-col-gutter-md"},W={class:"col-auto"},X={key:1,class:"row items-center q-gutter-sm"},Y={key:2,class:"row q-col-gutter-md"},Z={class:"text-subtitle1"},j={class:"text-caption text-grey-7"},z={key:0,class:"col-12"},ae=V({__name:"BoardsPage",setup(d){const n=K(),Q=q(),r=E(),f=h(!1),i=h("");S(async()=>{await r.fetchBoards()});function y(u){Q.push({name:"board",params:{boardId:u}})}async function _(){const u=i.value.trim();if(!u)return;const e=await r.createBoard(u);e&&(f.value=!1,i.value="",n.notify({type:"positive",message:"Board created"}),y(e.id))}return(u,e)=>(l(),C($,{class:"q-pa-md"},{default:a(()=>[s("div",J,[e[3]||(e[3]=s("div",{class:"col"},[s("div",{class:"text-h5"},"Boards")],-1)),s("div",W,[t(p,{color:"primary",label:"New board",onClick:e[0]||(e[0]=o=>f.value=!0)})])]),t(U,{class:"q-my-md"}),m(r).error?(l(),C(A,{key:0,class:"bg-red-1 text-red-10 q-mb-md",rounded:""},{default:a(()=>[N(v(m(r).error),1)]),_:1})):B("",!0),m(r).loading?(l(),c("div",X,[t(T),e[4]||(e[4]=s("div",null,"Loadingâ€¦",-1))])):(l(),c("div",Y,[(l(!0),c(D,null,F(m(r).boards,o=>(l(),c("div",{key:o.id,class:"col-12 col-sm-6 col-md-4"},[t(g,{class:"cursor-pointer",onClick:G=>y(o.id)},{default:a(()=>[t(b,null,{default:a(()=>[s("div",Z,v(o.title),1),s("div",j," Created "+v(new Date(o.createdAt).toLocaleString()),1)]),_:2},1024)]),_:2},1032,["onClick"])]))),128)),m(r).boards.length===0?(l(),c("div",z,[t(g,{flat:"",bordered:""},{default:a(()=>[t(b,null,{default:a(()=>[...e[5]||(e[5]=[s("div",{class:"text-subtitle2"},"No boards yet",-1),s("div",{class:"text-caption text-grey-7"},"Create one to get started.",-1)])]),_:1})]),_:1})])):B("",!0)])),t(I,{modelValue:f.value,"onUpdate:modelValue":e[2]||(e[2]=o=>f.value=o)},{default:a(()=>[t(g,{style:{"min-width":"380px"}},{default:a(()=>[t(b,null,{default:a(()=>[...e[6]||(e[6]=[s("div",{class:"text-h6"},"Create board",-1)])]),_:1}),t(b,null,{default:a(()=>[t(R,{modelValue:i.value,"onUpdate:modelValue":e[1]||(e[1]=o=>i.value=o),label:"Title",autofocus:"",onKeyup:L(_,["enter"])},null,8,["modelValue"])]),_:1}),t(M,{align:"right"},{default:a(()=>[P(t(p,{flat:"",label:"Cancel"},null,512),[[O]]),t(p,{color:"primary",label:"Create",disable:!i.value.trim(),onClick:_},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}});export{ae as default};
